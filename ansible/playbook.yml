---
- hosts: localhost
  connection: local
  roles:
   - role: apache2
  become: yes
  # vars:
  #  docker_group: docker
  # #  remote_user: ubuntu
  # tasks:
  #  # sudo apt-get install *
  #  - name: Install docker packages
  #    apt:
  #     name: "{{ packages }}"
  #     state: present
  #     update_cache: yes
  #    vars:
  #     packages:
  #      - apt-transport-https
  #      - ca-certificates
  #      - curl
  #      - software-properties-common
  #     tags:
  #      - docker

  #  # curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
  #  - name: Add Docker s official GPG key
  #    apt_key:
  #     url: https://download.docker.com/linux/ubuntu/gpg
  #     state: present
  #    tags:
  #     - docker

  #  # sudo apt-key fingerprint 0EBFCD88
  #  - name: Verify that we have the key with the fingerprint
  #    apt_key:
  #     id: 0EBFCD88
  #     state: present
  #    tags:
  #    - docker

  #  # sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu bionic stable"
  #  - name: Set up the stable repository
  #    apt_repository:
  #     repo: deb [arch=amd64] https://download.docker.com/linux/ubuntu bionic stable
  #     state: present
  #     update_cache: yes
  #    tags:
  #    - docker

  #  # sudo apt-get update
  #  - name: Update apt packages
  #    apt:
  #     update_cache: yes
  #    tags:
  #     - docker

  #  # sudo apt-get install docker-ce=18.03.*
  #  - name: Install docker
  #    apt:
  #     name: docker-ce=18.03.*
  #     state: present
  #     update_cache: yes
  #    notify: Start docker on boot
  #    tags:
  #     - docker

  #  # sudo groupadd docker
  #  - name: Create "docker" group
  #    group:
  #     name: "{{ docker_group }}"
  #     state: present
  #    tags:
  #    - docker

  #  # sudo usermod -aG docker ubuntu
  #  - name: Add remote "ubuntu" user to "docker" group
  #    user:
  #     name: "{{ remote_user }}"
  #     group: "{{ docker_group }}"
  #     append: yes
  #    tags:
  #    - docker

  #  # Install docker compose
  #  - name: Ensure docker-compose is installed and available
  #    get_url: 
  #     url : https://github.com/docker/compose/releases/download/1.23.2/docker-compose-{{ ansible_system }}-{{ ansible_userspace_architecture }}
  #     dest: /usr/local/bin/docker-compose
  #     mode: 'u+x,g+x'
  #    tags:
  #     - docker
      
  # # sudo systemctl enable docker
  # handlers:
  #  - name: Start docker on boot
  #    service: name=docker state=restarted